var v=o=>{throw TypeError(o)};var _=(o,t,e)=>t.has(o)||v("Cannot "+e);var n=(o,t,e)=>(_(o,t,"read from private field"),e?e.call(o):t.get(o)),d=(o,t,e)=>t.has(o)?v("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(o):t.set(o,e),c=(o,t,e,r)=>(_(o,t,"write to private field"),r?r.call(o,e):t.set(o,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const g of i.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&r(g)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();var a,u;class M{constructor(t=5){d(this,a);d(this,u);c(this,a,t),c(this,u,this.makeGrid())}makeGrid(){const t=[];for(let e=0;e<n(this,a);e++){const r=[];for(let s=0;s<n(this,a);s++)r.push(0);t.push(r)}return t}isEmptyCell(t,e){return n(this,u)[t][e]===0}setCell(t,e,r){n(this,u)[t][e]=r}getGrid(){return n(this,u)}getSize(){return n(this,a)}}a=new WeakMap,u=new WeakMap;var h,f,m;class S{constructor(t,e){d(this,h,0);d(this,f,null);d(this,m,null);this._board=t,this._html=e,this._html.render(this._board),this.listenBoard()}listenBoard(){var t;(t=document.getElementById(C))==null||t.addEventListener("click",e=>{const r=e.target;if(!r.classList.contains("cell"))return;const s=r.dataset.rowIdx?Number(r.dataset.rowIdx):null,i=r.dataset.colIdx?Number(r.dataset.colIdx):null;s===null||i===null||this._board.isEmptyCell(s,i)&&this.isValidMove(s,i)&&this.moveHorse(s,i)})}moveHorse(t,e){c(this,h,n(this,h)+1),c(this,f,t),c(this,m,e),this._board.setCell(t,e,n(this,h));const r=this.getValidMoves(t,e);this._html.render(this._board,n(this,h),r)}isValidMove(t,e){if(n(this,f)!==null&&n(this,m)!==null){const r=Math.abs(t-n(this,f)),s=Math.abs(e-n(this,m));return r===2&&s===1||r===1&&s===2}return!0}getValidMoves(t,e){return[{row:t-2,col:e-1},{row:t-2,col:e+1},{row:t+2,col:e-1},{row:t+2,col:e+1},{row:t-1,col:e-2},{row:t-1,col:e+2},{row:t+1,col:e-2},{row:t+1,col:e+2}].filter(s=>s.row>=0&&s.row<this._board.getSize()&&s.col>=0&&s.col<this._board.getSize()&&this._board.isEmptyCell(s.row,s.col))}}h=new WeakMap,f=new WeakMap,m=new WeakMap;var p;class O{constructor(t){d(this,p);const e=document.getElementById(t);if(!e)throw new Error("app element not found");c(this,p,e)}render(t,e=0,r=[]){n(this,p).innerHTML="";const s=t.getGrid(),i=document.createElement("div");i.classList.add("board"),s.forEach((g,y)=>{const b=document.createElement("div");b.classList.add("row"),g.forEach((w,E)=>{const l=document.createElement("div");l.dataset.rowIdx=y.toString(),l.dataset.colIdx=E.toString(),l.classList.add("cell"),w!==0&&(l.innerText=w.toString(),l.classList.add("selected")),e&&e===w&&l.classList.add("active"),r.some(L=>L.row===y&&L.col===E)&&l.classList.add("possible_move"),b.appendChild(l)}),i.appendChild(b)}),n(this,p).appendChild(i)}}p=new WeakMap;const C="app",P=new M,B=new O(C);new S(P,B);
