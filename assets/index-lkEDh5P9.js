var M=Object.defineProperty;var v=r=>{throw TypeError(r)};var I=(r,t,e)=>t in r?M(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var C=(r,t,e)=>I(r,typeof t!="symbol"?t+"":t,e),P=(r,t,e)=>t.has(r)||v("Cannot "+e);var n=(r,t,e)=>(P(r,t,"read from private field"),e?e.call(r):t.get(r)),d=(r,t,e)=>t.has(r)?v("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),c=(r,t,e,i)=>(P(r,t,"write to private field"),i?i.call(r,e):t.set(r,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const g of o.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();var a,u;class S{constructor(t=5){d(this,a);d(this,u);c(this,a,t),c(this,u,this.makeGrid())}makeGrid(){const t=[];for(let e=0;e<n(this,a);e++){const i=[];for(let s=0;s<n(this,a);s++)i.push(0);t.push(i)}return t}isEmptyCell(t,e){return n(this,u)[t][e]===0}setCell(t,e,i){n(this,u)[t][e]=i}getGrid(){return n(this,u)}getSize(){return n(this,a)}}a=new WeakMap,u=new WeakMap;var h;class b{constructor(t){d(this,h);const e=document.getElementById(t);if(!e)throw new Error("app element not found");c(this,h,e)}render(t,e=0,i=[]){n(this,h).innerHTML="";const s=t.getGrid(),o=document.createElement("div");o.classList.add("board"),s.forEach((g,_)=>{const w=document.createElement("div");w.classList.add("row"),g.forEach((y,E)=>{const l=document.createElement("div");l.dataset.rowIdx=_.toString(),l.dataset.colIdx=E.toString(),l.classList.add("cell"),y!==0&&(l.innerText=y.toString(),l.classList.add("selected")),e&&e===y&&l.classList.add("active"),i.some(L=>L.row===_&&L.col===E)&&l.classList.add("possible_move"),w.appendChild(l)}),o.appendChild(w)}),n(this,h).appendChild(o)}}h=new WeakMap,C(b,"APP_ID","app");var f,m,p;class D{constructor(t,e){d(this,f,0);d(this,m,null);d(this,p,null);this._board=t,this._html=e,this._html.render(this._board),this.listenBoard()}listenBoard(){var t;(t=document.getElementById(b.APP_ID))==null||t.addEventListener("click",e=>{const i=e.target;if(!i.classList.contains("cell"))return;const s=i.dataset.rowIdx?Number(i.dataset.rowIdx):null,o=i.dataset.colIdx?Number(i.dataset.colIdx):null;s===null||o===null||this._board.isEmptyCell(s,o)&&this.isValidMove(s,o)&&this.moveHorse(s,o)})}moveHorse(t,e){c(this,f,n(this,f)+1),c(this,m,t),c(this,p,e),this._board.setCell(t,e,n(this,f));const i=this.getValidMoves(t,e);this._html.render(this._board,n(this,f),i)}isValidMove(t,e){if(n(this,m)!==null&&n(this,p)!==null){const i=Math.abs(t-n(this,m)),s=Math.abs(e-n(this,p));return i===2&&s===1||i===1&&s===2}return!0}getValidMoves(t,e){return[{row:t-2,col:e-1},{row:t-2,col:e+1},{row:t+2,col:e-1},{row:t+2,col:e+1},{row:t-1,col:e-2},{row:t-1,col:e+2},{row:t+1,col:e-2},{row:t+1,col:e+2}].filter(s=>s.row>=0&&s.row<this._board.getSize()&&s.col>=0&&s.col<this._board.getSize()&&this._board.isEmptyCell(s.row,s.col))}}f=new WeakMap,m=new WeakMap,p=new WeakMap;const O=new S,B=new b(b.APP_ID);new D(O,B);
